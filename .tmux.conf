
## Remap prefix: C-a
set -g prefix C-a
bind C-a send-prefix
unbind C-b


# enable mouse mode
#set -g mouse on

#copy using xclip
# Use vi-style keybindings in copy mode
setw -g mode-keys vi

# Bind 'y' in copy mode to copy selection to system clipboard
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "xclip -selection clipboard -in"

# Resize history
set -g history-limit 10000

# Clear history
bind-key k send-keys -R \; clear-history

# Join window
bind-key j command-prompt -p "Join pane from: " "join-pane -s '%%'"
# Send pane to window
bind-key s command-prompt -p "Send pane to: " "join-pane -t '%%'"

# Log whole history to file
run-shell /opt/tmux-logging/logging.tmux

# Make new panes start in the current pane's directory
bind '"' split-window -c "#{pane_current_path}"
bind % split-window -h -c "#{pane_current_path}"

# Make new windows start in the current pane's directory
bind c new-window -c "#{pane_current_path}"


# Prefix + P → save full pane history to ~/tmux-logs/<timestamp>_<folder>_<cmd>_pane<idx>.log
bind-key P run-shell -b ' \
  LOGDIR="$HOME/tmux-logs"; mkdir -p "$LOGDIR"; \
  CMD="#{pane_current_command}"; \
  DIR="#{pane_current_path}"; \
  BASE="$(basename "$DIR")"; \
  PANE="#{pane_index}"; \
  STAMP="$(date +%F_%H-%M-%S)"; \
  FILE="$LOGDIR/${STAMP}_${BASE}_${CMD}_pane${PANE}.log"; \
  tmux capture-pane -S - -E -; \
  tmux save-buffer -- "$FILE"; \
  tmux delete-buffer; \
  tmux display-message "Saved → $FILE" \
'
